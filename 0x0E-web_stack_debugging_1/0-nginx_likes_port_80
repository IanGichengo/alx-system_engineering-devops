#!/usr/bin/env bash
# Ensure Nginx is running
sudo systemctl start nginx

# Check if Nginx is configured to listen on port 80
if! grep -q "listen 80;" /etc/nginx/nginx.conf; then
    echo "Configuring Nginx to listen on port 80..."
    sudo sed -i 's/listen\s*80;/listen 80;/g' /etc/nginx/nginx.conf
    sudo systemctl restart nginx
fi

# Ensure the container's port 80 is mapped to the host's port 80
echo "Mapping container's port 80 to host's port 80..."
docker run -d -p 80:80 --name my_nginx_container nginx
