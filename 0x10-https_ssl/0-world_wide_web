#!/usr/bin/env bash
# Function to display DNS record information
get_dns_record() {
    local subdomain=$1
    local domain=$2
    local result

    result=$(dig +short ${subdomain}.${domain})
    if [ -z "$result" ]; then
        echo "The subdomain ${subdomain}.${domain} does not exist or has no A record."
        exit 1
    fi

    echo "The subdomain ${subdomain} is an A record and points to ${result}"
}

# Check if at least one argument is provided
if [ $# -lt 1 ]; then
    echo "Usage: $0 domain [subdomain]"
    exit 1
fi

domain=$1

# If only the domain is provided, display information for the predefined subdomains
if [ $# -eq 1 ]; then
    subdomains=("www" "lb-01" "web-01" "web-02")
    for sub in "${subdomains[@]}"; do
        get_dns_record $sub $domain
    done
else
    # If both domain and subdomain are provided, display information for the specific subdomain
    subdomain=$2
    get_dns_record $subdomain $domain
fi
